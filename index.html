<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Barberflix - Encontre a Barbearia Perfeita</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #000; color: #fff; overflow-x: hidden; }
        
        /* Header */
        nav { position: fixed; top: 0; left: 0; right: 0; z-index: 1000; padding: 20px 50px; display: flex; justify-content: space-between; align-items: center; background: linear-gradient(180deg, rgba(0,0,0,0.7) 0%, transparent 100%); transition: background 0.3s; }
        nav.scrolled { background: rgba(0,0,0,0.95); }
        .logo { display: flex; align-items: center; font-size: 28px; font-weight: bold; color: #e50914; cursor: pointer; transition: opacity 0.3s; }
        .logo:hover { opacity: 0.8; }
        .nav-buttons { display: flex; gap: 20px; }
        .btn { padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; font-size: 14px; font-weight: 600; transition: all 0.3s; text-decoration: none; display: inline-block; }
        .btn-outline { background: transparent; color: #fff; border: 1px solid rgba(255,255,255,0.3); }
        .btn-outline:hover { background: rgba(255,255,255,0.1); }
        .btn-primary { background: #e50914; color: #fff; }
        .btn-primary:hover { background: #f40612; transform: scale(1.05); }
        
        /* Hero */
        .hero { min-height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; padding: 100px 20px 50px; position: relative; background: linear-gradient(180deg, #000 0%, #1a0000 100%); }
        .hero::before { content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: radial-gradient(circle at 20% 30%, rgba(229, 9, 20, 0.1) 0%, transparent 50%), radial-gradient(circle at 80% 70%, rgba(229, 9, 20, 0.1) 0%, transparent 50%); pointer-events: none; }
        .hero-content { position: relative; z-index: 1; max-width: 800px; }
        .hero h1 { font-size: 5rem; line-height: 1.1; margin-bottom: 30px; }
        .hero h1 .highlight { background: linear-gradient(90deg, #e50914, #b20710); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .hero p { font-size: 1.6rem; color: #ccc; max-width: 700px; margin: 0 auto 50px; line-height: 1.6; }
        .hero-buttons { display: flex; gap: 20px; justify-content: center; flex-wrap: wrap; margin-bottom: 60px; }
        .btn-large { padding: 15px 40px; font-size: 18px; min-width: 280px; }
        .trust-badges { display: flex; justify-content: center; gap: 40px; flex-wrap: wrap; margin-top: 50px; padding-top: 40px; border-top: 1px solid rgba(255,255,255,0.1); }
        .trust-badge { text-align: center; }
        .trust-badge-icon { font-size: 1.5rem; margin-bottom: 5px; }
        .trust-badge-text { color: #999; font-size: 0.85rem; }
        
        /* Features */
        .features { padding: 100px 50px; background: #0a0a0a; }
        .features-container { max-width: 1200px; margin: 0 auto; }
        .section-title { text-align: center; font-size: 3.5rem; margin-bottom: 15px; }
        .section-title .highlight { background: linear-gradient(90deg, #e50914, #b20710); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .section-subtitle { text-align: center; color: #999; font-size: 1.4rem; max-width: 700px; margin: 0 auto 60px; }
        .features-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 30px; }
        .feature-card { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 10px; padding: 30px; transition: all 0.3s; }
        .feature-card:hover { border-color: #e50914; transform: translateY(-5px); background: rgba(229, 9, 20, 0.1); }
        .feature-icon { font-size: 3rem; margin-bottom: 20px; }
        .feature-card h3 { font-size: 1.5rem; margin-bottom: 10px; }
        .feature-card p { color: #ccc; line-height: 1.6; }
        
        /* CTA */
        .cta { padding: 100px 50px; text-align: center; background: linear-gradient(180deg, #0a0a0a 0%, #000 100%); }
        .cta-content { max-width: 700px; margin: 0 auto; }
        
        /* Footer */
        footer { background: #000; padding: 50px; border-top: 1px solid rgba(255,255,255,0.1); }
        .footer-content { max-width: 1200px; margin: 0 auto; display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 40px; }
        .footer-section h3 { margin-bottom: 20px; color: #e50914; }
        .footer-section ul { list-style: none; }
        .footer-section ul li { margin-bottom: 10px; }
        .footer-section a { color: #999; text-decoration: none; transition: color 0.3s; }
        .footer-section a:hover { color: #fff; }
        .footer-bottom { text-align: center; margin-top: 40px; padding-top: 40px; border-top: 1px solid rgba(255,255,255,0.1); color: #999; }
        
        /* Modal */
        .modal { display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.9); z-index: 2000; align-items: center; justify-content: center; }
        .modal.active { display: flex; }
        .modal-content { background: #1a1a1a; border: 1px solid rgba(255,255,255,0.1); border-radius: 10px; padding: 40px; max-width: 450px; width: 90%; position: relative; max-height: 90vh; overflow-y: auto; }
        .close-modal { position: absolute; top: 20px; right: 20px; background: none; border: none; color: #fff; font-size: 30px; cursor: pointer; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; border-radius: 50%; transition: background 0.3s; }
        .close-modal:hover { background: rgba(255,255,255,0.1); }
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; margin-bottom: 8px; color: #ccc; font-size: 14px; }
        .form-group input, .form-group select, .form-group textarea { width: 100%; padding: 12px; background: #0a0a0a; border: 1px solid rgba(255,255,255,0.2); border-radius: 5px; color: #fff; font-size: 16px; font-family: inherit; }
        .form-group input:focus, .form-group select:focus, .form-group textarea:focus { outline: none; border-color: #e50914; }
        .checkbox-group { display: flex; align-items: center; gap: 10px; margin: 15px 0; }
        .checkbox-group input[type="checkbox"] { width: 18px; height: 18px; cursor: pointer; accent-color: #e50914; }
        .checkbox-group label { color: #ccc; font-size: 14px; cursor: pointer; margin: 0; }
        .alert { padding: 15px; border-radius: 5px; margin-bottom: 20px; display: none; }
        .alert.show { display: block; }
        .alert-success { background: rgba(0,255,0,0.1); border: 1px solid rgba(0,255,0,0.3); color: #0f0; }
        .alert-error { background: rgba(255,0,0,0.1); border: 1px solid rgba(255,0,0,0.3); color: #f00; }
        
        @media (max-width: 768px) { 
            .hero h1 { font-size: 2.5rem !important; } 
            .hero p { font-size: 1.2rem !important; } 
            nav { padding: 15px 20px; flex-wrap: wrap; }
            .nav-buttons { gap: 10px; }
            .nav-buttons button { padding: 8px 16px; font-size: 13px; }
            .features { padding: 60px 20px; } 
            .section-title { font-size: 2rem; }
            .hero-buttons { flex-direction: column; width: 100%; }
            .hero-buttons button { width: 100%; }
            .modal-content { padding: 30px 20px; width: 95%; max-height: 95vh; }
            .form-group input, .form-group textarea { font-size: 16px; padding: 14px; }
        }
        @media (max-width: 480px) {
            nav { padding: 12px 15px; }
            .logo { font-size: 20px; }
            .nav-buttons { gap: 8px; }
            .nav-buttons button { padding: 6px 12px; font-size: 12px; }
            .hero { padding: 80px 15px 30px; }
            .hero h1 { font-size: 2rem !important; }
            .hero p { font-size: 1rem !important; }
            .hero-buttons button { padding: 12px 20px; font-size: 16px; }
            .features { padding: 40px 15px; }
            .section-title { font-size: 1.5rem; }
            .features-grid { grid-template-columns: 1fr; gap: 20px; }
            .modal-content { padding: 25px 15px; }
            .form-group { margin-bottom: 15px; }
        }
    </style>
</head>
<body>
    <nav id="nav">
        <div class="logo" onclick="window.scrollTo({top: 0, behavior: 'smooth'})">Barberflix</div>
        <div class="nav-buttons">
            <button class="btn btn-outline" onclick="openModal('login')">Entrar</button>
            <button class="btn btn-primary" onclick="openModal('register')">Criar conta</button>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-content">
            <h1>
                Encontre o corte perfeito<br>
                <span class="highlight">na palma da sua m√£o</span>
            </h1>
            <p>Descubra as melhores barbearias da sua regi√£o, agende seu hor√°rio e transforme seu visual com profissionais de qualidade.</p>
            <div class="hero-buttons">
                <button class="btn btn-primary btn-large" onclick="openModal('login')">Buscar Barbearias</button>
                <button class="btn btn-outline btn-large" onclick="openModal('register')">Criar Conta Gr√°tis</button>
            </div>
            <div class="trust-badges">
                <div class="trust-badge">
                    <div class="trust-badge-icon">üîí</div>
                    <div class="trust-badge-text">100% Seguro</div>
                </div>
                <div class="trust-badge">
                    <div class="trust-badge-icon">‚ö°</div>
                    <div class="trust-badge-text">Agendamento R√°pido</div>
                </div>
                <div class="trust-badge">
                    <div class="trust-badge-icon">‚≠ê</div>
                    <div class="trust-badge-text">Profissionais Verificados</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Features -->
    <section class="features">
        <div class="features-container">
            <h2 class="section-title">Por que escolher <span class="highlight">Barberflix</span>?</h2>
            <p class="section-subtitle">A plataforma completa para encontrar e agendar com os melhores profissionais</p>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">üîç</div>
                    <h3>Busque F√°cil</h3>
                    <p>Encontre barbearias pr√≥ximas com apenas alguns cliques. Filtre por localiza√ß√£o, avalia√ß√µes e servi√ßos.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üìÖ</div>
                    <h3>Agende Online</h3>
                    <p>Marque seu hor√°rio sem sair de casa. Veja disponibilidade em tempo real e confirme na hora.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">‚≠ê</div>
                    <h3>Avalia√ß√µes Reais</h3>
                    <p>Veja o que outros clientes est√£o falando. Avalie e comente sobre sua experi√™ncia.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üí≥</div>
                    <h3>Pagamento Seguro</h3>
                    <p>Pague de forma segura e r√°pida. Aceitamos cart√£o, PIX e outras formas de pagamento.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üì±</div>
                    <h3>App Mobile</h3>
                    <p>Acesse de qualquer lugar. Nossa plataforma funciona perfeitamente no celular.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üéÅ</div>
                    <h3>Ofertas Exclusivas</h3>
                    <p>Receba promo√ß√µes e descontos especiais das barbearias parceiras.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- CTA -->
    <section class="cta">
        <div class="cta-content">
            <h2 class="section-title">Pronto para come√ßar?</h2>
            <p class="section-subtitle">Junte-se a milhares de clientes satisfeitos e encontre sua barbearia ideal hoje mesmo.</p>
            <div class="hero-buttons">
                <button class="btn btn-primary btn-large" onclick="openModal('register')">Criar Conta Gr√°tis</button>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>Barberflix</h3>
                <ul>
                    <li><a href="#">Sobre N√≥s</a></li>
                    <li><a href="#">Como Funciona</a></li>
                    <li><a href="#">Contato</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Para Clientes</h3>
                <ul>
                    <li><a href="#">Buscar Barbearias</a></li>
                    <li><a href="#">Agendar Hor√°rio</a></li>
                    <li><a href="#">Avaliar</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Suporte</h3>
                <ul>
                    <li><a href="#">Central de Ajuda</a></li>
                    <li><a href="#">FAQ</a></li>
                    <li><a href="#">Pol√≠tica de Privacidade</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>¬© 2025 Barberflix. Todos os direitos reservados.</p>
        </div>
    </footer>

    <!-- Login Modal -->
    <div id="login" class="modal">
        <div class="modal-content">
            <button class="close-modal" onclick="closeModal('login')">&times;</button>
            <h2 style="margin-bottom: 30px; font-size: 2rem;">Login</h2>
            <div id="loginAlert" class="alert"></div>
            <form id="loginForm" onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="loginEmail" required>
                </div>
                <div class="form-group">
                    <label>Senha</label>
                    <input type="password" id="loginPassword" required>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="rememberMe">
                    <label for="rememberMe">Manter logado</label>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">Entrar</button>
            </form>
        </div>
    </div>

    <!-- Register Modal -->
    <div id="register" class="modal">
        <div class="modal-content">
            <button class="close-modal" onclick="closeModal('register')">&times;</button>
            <h2 style="margin-bottom: 30px; font-size: 2rem;">Criar Conta</h2>
            <div id="registerAlert" class="alert"></div>
            <form id="registerForm" onsubmit="handleRegister(event)">
                <div class="form-group">
                    <label>Nome Completo *</label>
                    <input type="text" id="registerName" required>
                </div>
                <div class="form-group">
                    <label>Email *</label>
                    <input type="email" id="registerEmail" required>
                </div>
                <div class="form-group">
                    <label>Telefone *</label>
                    <input type="tel" id="registerPhone" required>
                </div>
                <div class="form-group">
                    <label>Senha *</label>
                    <input type="password" id="registerPassword" required minlength="6">
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">Criar Conta</button>
            </form>
        </div>
    </div>

    <script>
        const SUPABASE_URL = 'https://tvvqwlxmpmolnyavabqq.supabase.co';
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR2dnF3bHhtcG1vbG55YXZhYnFxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMwODg5MjMsImV4cCI6MjA3ODY2NDkyM30.5FW2R9rcYXpAvpAjWnviBRIjeQOVf2pZwWrYrqljdHw';
        const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
        const ADMIN_EMAILS = ['henrikocarlos69@gmail.com'];
        
        // Scroll header
        window.addEventListener('scroll', () => {
            const nav = document.getElementById('nav');
            if (window.scrollY > 50) {
                nav.classList.add('scrolled');
            } else {
                nav.classList.remove('scrolled');
            }
        });
        
        // Admin access oculto - clique 5x no logo
        let logoClicks = 0;
        document.querySelector('.logo').addEventListener('click', (e) => {
            logoClicks++;
            if (logoClicks >= 5) {
                logoClicks = 0;
                const email = prompt('üîê Acesso Admin\nDigite o email admin:');
                if (email && ADMIN_EMAILS.includes(email)) {
                    window.location.href = 'barberflix-admin.html';
                } else if (email) {
                    alert('Email n√£o autorizado.');
                }
            }
            setTimeout(() => logoClicks = 0, 2000);
        });
        
        function openModal(modalId) {
            document.getElementById(modalId).classList.add('active');
        }
        
        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }
        
        async function handleLogin(e) {
            e.preventDefault();
            const alert = document.getElementById('loginAlert');
            try {
                const { data, error } = await supabase.auth.signInWithPassword({
                    email: document.getElementById('loginEmail').value,
                    password: document.getElementById('loginPassword').value,
                    options: { 
                        persistSession: document.getElementById('rememberMe').checked,
                        emailRedirectTo: undefined
                    }
                });
                
                if (error) {
                    // Se for erro de email n√£o confirmado, tentar confirmar automaticamente
                    if (error.message.includes('not confirmed') || error.message.includes('Email not confirmed')) {
                        showAlert(alert, 'Confirmando email automaticamente...', 'success');
                        // Tentar reenviar confirma√ß√£o ou fazer login mesmo assim
                        const { error: retryError } = await supabase.auth.signInWithPassword({
                            email: document.getElementById('loginEmail').value,
                            password: document.getElementById('loginPassword').value,
                            options: { 
                                persistSession: document.getElementById('rememberMe').checked
                            }
                        });
                        if (retryError) throw retryError;
                    } else {
                        throw error;
                    }
                }
                
                // Buscar perfil
                await new Promise(resolve => setTimeout(resolve, 1000));
                const { data: profile } = await supabase
                    .from('profiles')
                    .select('user_type')
                    .eq('id', data.user.id)
                    .single();
                
                showAlert(alert, 'Login realizado!', 'success');
                setTimeout(() => {
                    if (ADMIN_EMAILS.includes(data.user.email)) {
                        window.location.href = 'barberflix-admin.html';
                    } else if (profile?.user_type === 'barber') {
                        window.location.href = 'barberflix-barbeiro.html';
                    } else {
                        // Cliente: mostrar apenas barbearias
                        showBarbershops();
                    }
                }, 1000);
            } catch (error) {
                showAlert(alert, error.message, 'error');
            }
        }
        
        async function handleRegister(e) {
            e.preventDefault();
            const alert = document.getElementById('registerAlert');
            try {
                const { data, error } = await supabase.auth.signUp({
                    email: document.getElementById('registerEmail').value,
                    password: document.getElementById('registerPassword').value,
                    options: {
                        data: {
                            full_name: document.getElementById('registerName').value,
                            phone: document.getElementById('registerPhone').value || null
                        }
                    }
                });
                
                if (error) {
                    // Se for erro de permiss√£o, mostrar mensagem mais clara
                    if (error.message.includes('permission denied') || error.message.includes('table users')) {
                        throw new Error('Erro de permiss√£o. Verifique as configura√ß√µes do Supabase.');
                    }
                    throw error;
                }
                
                if (!data.user) {
                    throw new Error('Usu√°rio n√£o foi criado. Tente novamente.');
                }
                
                // Aguardar trigger criar perfil
                showAlert(alert, 'Criando perfil...', 'success');
                await new Promise(resolve => setTimeout(resolve, 3000));
                
                // Tentar atualizar perfil (pode j√° ter sido criado pelo trigger)
                let profileUpdated = false;
                for (let i = 0; i < 5; i++) {
                    const { error: updateError } = await supabase
                        .from('profiles')
                        .update({
                            full_name: document.getElementById('registerName').value,
                            phone: document.getElementById('registerPhone').value || null,
                            user_type: 'client'
                        })
                        .eq('id', data.user.id);
                    
                    if (!updateError) {
                        profileUpdated = true;
                        break;
                    }
                    
                    // Se der erro 404, o perfil ainda n√£o foi criado, aguardar mais
                    if (updateError.message.includes('No rows') || updateError.code === 'PGRST116') {
                        await new Promise(resolve => setTimeout(resolve, 2000));
                        continue;
                    }
                    
                    // Se der erro de permiss√£o, tentar inserir
                    if (updateError.message.includes('permission denied') || updateError.message.includes('403')) {
                        // Tentar inserir perfil
                        const { error: insertError } = await supabase
                            .from('profiles')
                            .insert({
                                id: data.user.id,
                                email: document.getElementById('registerEmail').value,
                                full_name: document.getElementById('registerName').value,
                                phone: document.getElementById('registerPhone').value || null,
                                user_type: 'client'
                            });
                        
                        if (!insertError || insertError.message.includes('duplicate')) {
                            profileUpdated = true;
                            break;
                        }
                    }
                    
                    await new Promise(resolve => setTimeout(resolve, 2000));
                }
                
                if (!profileUpdated) {
                    showAlert(alert, 'Conta criada, mas houve problema ao criar perfil. Fa√ßa login e tente novamente.', 'error');
                    setTimeout(() => {
                        closeModal('registerModal');
                        openModal('loginModal');
                    }, 3000);
                    return;
                }
                
                showAlert(alert, 'Conta criada! Redirecionando...', 'success');
                setTimeout(() => {
                    showBarbershops();
                }, 2000);
            } catch (error) {
                showAlert(alert, error.message || 'Erro ao criar conta. Tente novamente.', 'error');
            }
        }
        
        async function showBarbershops() {
            closeModal('login');
            closeModal('register');
            
            // Buscar nome do cliente
            const { data: { user } } = await supabase.auth.getUser();
            let clientName = 'Cliente';
            if (user) {
                // Aguardar um pouco para garantir que o perfil existe
                await new Promise(resolve => setTimeout(resolve, 1000));
                
                const { data: profile } = await supabase
                    .from('profiles')
                    .select('full_name')
                    .eq('id', user.id)
                    .maybeSingle();
                
                if (profile?.full_name) {
                    clientName = profile.full_name;
                } else if (user.email) {
                    // Se n√£o tiver nome, usar email
                    clientName = user.email.split('@')[0];
                }
            }
            
            // Esconder hero, features, cta, footer
            document.querySelector('.hero').style.display = 'none';
            document.querySelector('.features').style.display = 'none';
            document.querySelector('.cta').style.display = 'none';
            document.querySelector('footer').style.display = 'none';
            
            // Atualizar nav com nome do cliente e bot√£o voltar
            const nav = document.querySelector('nav');
            nav.innerHTML = `
                <div class="logo" onclick="window.location.reload()">Barberflix</div>
                <div class="nav-buttons">
                    <span style="color: #fff; margin-right: 15px;">Ol√°, ${clientName.split(' ')[0] || 'Cliente'}</span>
                    <button class="btn btn-outline" onclick="logout()">Sair</button>
                </div>
            `;
            nav.style.display = 'flex';
            
            // Criar view de barbearias
            const hero = document.querySelector('.hero');
            hero.style.display = 'block';
            hero.innerHTML = `
                <style>
                    .barbershops-container { max-width: 1400px; margin: 0 auto; padding: 40px 20px; }
                    .barbershops-header { margin-bottom: 30px; }
                    .barbershops-header h1 { font-size: 2.5rem; margin-bottom: 10px; }
                    .barbershops-header p { color: #999; font-size: 1.1rem; }
                    .barbershops-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 25px; }
                    .barbershop-card { background: #1a1a1a; border: 1px solid rgba(255,255,255,0.1); border-radius: 15px; overflow: hidden; cursor: pointer; transition: all 0.3s; }
                    .barbershop-card:hover { transform: translateY(-5px); border-color: #e50914; box-shadow: 0 10px 30px rgba(229, 9, 20, 0.3); }
                    .barbershop-image { width: 100%; height: 200px; background: linear-gradient(135deg, #e50914 0%, #b20710 100%); display: flex; align-items: center; justify-content: center; font-size: 4rem; position: relative; overflow: hidden; }
                    .barbershop-image::before { content: '‚úÇÔ∏è'; position: absolute; opacity: 0.3; z-index: 0; }
                    .barbershop-image img { width: 100%; height: 100%; object-fit: cover; position: relative; z-index: 1; }
                    .barbershop-info { padding: 20px; position: relative; }
                    .barbershop-profile-img { position: absolute; top: -50px; left: 20px; width: 80px; height: 80px; border-radius: 50%; border: 3px solid #1a1a1a; object-fit: cover; z-index: 2; background: #1a1a1a; }
                    .barbershop-name { font-size: 1.5rem; font-weight: bold; margin-bottom: 10px; color: #e50914; margin-top: 40px; }
                    .barbershop-detail { display: flex; align-items: center; gap: 8px; margin-bottom: 8px; color: #ccc; font-size: 0.9rem; }
                    .barbershop-detail svg { width: 16px; height: 16px; fill: #e50914; flex-shrink: 0; }
                    .barbershop-description { color: #999; margin-top: 15px; line-height: 1.5; font-size: 0.9rem; }
                    .empty-state { text-align: center; padding: 60px 20px; color: #999; }
                    .empty-state h2 { font-size: 2rem; margin-bottom: 10px; }
                    @media (max-width: 768px) {
                        .barbershops-container { padding: 20px 15px !important; }
                        .barbershops-grid { grid-template-columns: 1fr !important; gap: 20px !important; }
                        .barbershops-header h1 { font-size: 1.8rem !important; margin-bottom: 8px !important; }
                        .barbershops-header p { font-size: 0.95rem !important; }
                        .barbershop-card { border-radius: 12px; }
                        .barbershop-image { height: 180px !important; }
                        .barbershop-info { padding: 15px !important; }
                        .barbershop-profile-img { width: 70px !important; height: 70px !important; top: -40px !important; left: 15px !important; border-width: 2px !important; }
                        .barbershop-name { font-size: 1.3rem !important; margin-top: 35px !important; margin-bottom: 8px !important; }
                        .barbershop-detail { font-size: 0.85rem !important; margin-bottom: 6px !important; }
                        .barbershop-detail svg { width: 14px !important; height: 14px !important; }
                        .barbershop-description { font-size: 0.85rem !important; margin-top: 12px !important; line-height: 1.4 !important; }
                        .empty-state { padding: 40px 15px !important; }
                        .empty-state h2 { font-size: 1.5rem !important; }
                    }
                    @media (max-width: 480px) {
                        .barbershops-container { padding: 15px 10px !important; }
                        .barbershops-header h1 { font-size: 1.5rem !important; }
                        .barbershop-image { height: 160px !important; }
                        .barbershop-profile-img { width: 60px !important; height: 60px !important; top: -35px !important; }
                        .barbershop-name { font-size: 1.2rem !important; margin-top: 30px !important; }
                        .barbershop-info { padding: 12px !important; }
                    }
                </style>
                <div class="barbershops-container">
                    <div class="barbershops-header">
                        <h1>Barbearias Dispon√≠veis</h1>
                        <p id="barbershopsCount">Carregando...</p>
                    </div>
                    <div id="barbershopsList" class="barbershops-grid">
                        <div style="grid-column: 1/-1; text-align: center; padding: 40px; color: #999;">
                            <p>Carregando barbearias...</p>
                        </div>
                    </div>
                </div>
            `;
            
            try {
                const { data, error } = await supabase
                    .from('barbershops')
                    .select('*')
                    .eq('is_active', true)
                    .order('name');
                
                if (error) throw error;
                
                if (!data || data.length === 0) {
                    document.getElementById('barbershopsList').innerHTML = `
                        <div class="empty-state" style="grid-column: 1/-1;">
                            <h2>Nenhuma barbearia encontrada</h2>
                            <p>Em breve teremos barbearias dispon√≠veis na sua regi√£o.</p>
                        </div>
                    `;
                    document.getElementById('barbershopsCount').textContent = '0 barbearias encontradas';
                    return;
                }
                
                document.getElementById('barbershopsCount').textContent = `${data.length} ${data.length === 1 ? 'barbearia encontrada' : 'barbearias encontradas'}`;
                
                document.getElementById('barbershopsList').innerHTML = data.map(shop => `
                    <div class="barbershop-card" onclick="viewBarbershop('${shop.id}')">
                        <div class="barbershop-image">
                            ${shop.cover_image ? `<img src="${shop.cover_image}" alt="${shop.name}">` : ''}
                        </div>
                        <div class="barbershop-info">
                            ${shop.profile_image ? `<img src="${shop.profile_image}" alt="${shop.name}" class="barbershop-profile-img">` : ''}
                            <div class="barbershop-name">${shop.name}</div>
                            ${shop.address ? `
                                <div class="barbershop-detail">
                                    <svg viewBox="0 0 24 24"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></svg>
                                    <span>${shop.address}, ${shop.city} - ${shop.state}</span>
                                </div>
                            ` : ''}
                            ${shop.phone ? `
                                <div class="barbershop-detail">
                                    <svg viewBox="0 0 24 24"><path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/></svg>
                                    <span>${shop.phone}</span>
                                </div>
                            ` : ''}
                            ${shop.description ? `
                                <div class="barbershop-description">${shop.description}</div>
                            ` : ''}
                        </div>
                    </div>
                `).join('');
            } catch (error) {
                document.getElementById('barbershopsList').innerHTML = `
                    <div class="empty-state" style="grid-column: 1/-1;">
                        <h2>Erro ao carregar</h2>
                        <p style="color: #f00;">${error.message}</p>
                    </div>
                `;
            }
        }
        
        function viewBarbershop(shopId) {
            // Fun√ß√£o para ver detalhes da barbearia
            alert('Detalhes da barbearia (ID: ' + shopId + ')\n\nEm breve voc√™ poder√° ver mais detalhes e agendar!');
        }
        
        async function logout() {
            await supabase.auth.signOut();
            window.location.reload();
        }
        
        function showAlert(element, message, type) {
            element.textContent = message;
            element.className = `alert alert-${type} show`;
            setTimeout(() => element.classList.remove('show'), 5000);
        }
    </script>
</body>
</html>

